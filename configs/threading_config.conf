# =============================================================================
# FGCOM-MUMBLE THREADING CONFIGURATION
# =============================================================================
# This file configures the threading architecture extensions for FGCom-mumble
# including background threads, thread safety mechanisms, and performance monitoring

[threading]
# Enable/disable individual background threads
enable_solar_data_thread = true
enable_propagation_thread = true
enable_api_server_thread = true
enable_gpu_compute_thread = true
enable_lightning_data_thread = true
enable_weather_data_thread = true
enable_antenna_pattern_thread = true

# Thread execution intervals
solar_data_interval_minutes = 15
propagation_interval_ms = 100
gpu_compute_interval_ms = 10
lightning_data_interval_seconds = 30
weather_data_interval_minutes = 5
antenna_pattern_interval_ms = 50

# Thread pool configuration
max_worker_threads = 8
max_gpu_threads = 4
max_api_threads = 16

# Thread affinity and priority
enable_thread_affinity = false
cpu_affinity_cores = 0,1,2,3,4,5,6,7

# Performance monitoring
enable_thread_monitoring = true
enable_performance_counters = true
monitoring_interval_seconds = 60

# =============================================================================
# SOLAR DATA CACHE CONFIGURATION
# =============================================================================
[solar_data_cache]
# Cache management
max_historical_entries = 1000
cache_timeout_seconds = 900
enable_cache_compression = false

# Update settings
retry_failed_updates = true
max_update_retries = 3
update_retry_delay_seconds = 60

# Data validation
validate_solar_data = true
min_sfi_value = 0
max_sfi_value = 300
min_k_index = 0
max_k_index = 9
min_a_index = 0
max_a_index = 400

# =============================================================================
# PROPAGATION QUEUE CONFIGURATION
# =============================================================================
[propagation_queue]
# Queue management
max_queue_size = 1000
queue_timeout_ms = 5000
enable_queue_priority = true

# Task processing
max_task_processing_time_ms = 1000
enable_task_retry = true
max_task_retries = 2
task_retry_delay_ms = 100

# Performance optimization
enable_batch_processing = true
batch_size = 10
batch_timeout_ms = 50

# =============================================================================
# GPU COMPUTE QUEUE CONFIGURATION
# =============================================================================
[gpu_compute_queue]
# GPU resource management
max_concurrent_tasks = 4
gpu_memory_limit_mb = 1024
gpu_utilization_threshold = 80.0
gpu_temperature_threshold = 85.0

# Task processing
max_task_processing_time_ms = 5000
enable_gpu_task_retry = true
max_gpu_task_retries = 1
gpu_task_retry_delay_ms = 200

# Performance monitoring
enable_gpu_monitoring = true
gpu_monitoring_interval_seconds = 10
log_gpu_performance = true

# =============================================================================
# LIGHTNING DATA CACHE CONFIGURATION
# =============================================================================
[lightning_data_cache]
# Cache management
max_recent_entries = 10000
max_nearby_entries = 1000
nearby_distance_km = 100.0
cache_timeout_seconds = 300

# Data filtering
min_strike_intensity_ka = 1.0
max_strike_age_hours = 24
enable_strike_filtering = true

# Update settings
retry_failed_updates = true
max_update_retries = 3
update_retry_delay_seconds = 30

# =============================================================================
# WEATHER DATA CACHE CONFIGURATION
# =============================================================================
[weather_data_cache]
# Cache management
max_locations = 1000
cache_timeout_seconds = 1800
enable_location_grouping = true
location_group_radius_km = 50.0

# Data validation
validate_weather_data = true
min_temperature_c = -60.0
max_temperature_c = 60.0
min_humidity_percent = 0.0
max_humidity_percent = 100.0
min_pressure_hpa = 800.0
max_pressure_hpa = 1100.0

# Update settings
retry_failed_updates = true
max_update_retries = 2
update_retry_delay_seconds = 120

# =============================================================================
# ANTENNA PATTERN CACHE CONFIGURATION
# =============================================================================
[antenna_pattern_cache]
# Cache management
max_cache_size = 500
cache_timeout_seconds = 3600
enable_pattern_compression = true

# Pattern loading
enable_lazy_loading = true
max_concurrent_loads = 4
pattern_load_timeout_ms = 2000

# Performance optimization
enable_pattern_preloading = false
preload_frequency_mhz = 14.230
preload_altitude_m = 1000

# =============================================================================
# THREAD SAFETY CONFIGURATION
# =============================================================================
[thread_safety]
# Mutex configuration
enable_shared_mutex = true
enable_recursive_mutex = false
mutex_timeout_ms = 1000

# Lock ordering
enable_deadlock_detection = true
max_lock_depth = 10
deadlock_timeout_ms = 5000

# Memory ordering
memory_ordering = relaxed
enable_memory_barriers = true

# =============================================================================
# PERFORMANCE MONITORING CONFIGURATION
# =============================================================================
[performance_monitoring]
# Monitoring intervals
thread_stats_interval_seconds = 60
cache_stats_interval_seconds = 120
gpu_stats_interval_seconds = 10
memory_stats_interval_seconds = 300

# Logging configuration
enable_performance_logging = true
log_level = info
log_file = fgcom_threading.log
max_log_file_size_mb = 100
max_log_files = 5

# Metrics collection
collect_cpu_metrics = true
collect_memory_metrics = true
collect_network_metrics = false
collect_disk_metrics = false

# Alert thresholds
cpu_usage_threshold = 80.0
memory_usage_threshold = 90.0
queue_size_threshold = 800
gpu_utilization_threshold = 90.0
gpu_temperature_threshold = 85.0

# =============================================================================
# ERROR HANDLING CONFIGURATION
# =============================================================================
[error_handling]
# Error recovery
enable_automatic_recovery = true
max_recovery_attempts = 3
recovery_delay_seconds = 5

# Error logging
enable_error_logging = true
log_error_details = true
error_log_file = fgcom_errors.log
max_error_log_size_mb = 50

# Thread error handling
restart_failed_threads = true
max_thread_restarts = 5
thread_restart_delay_seconds = 10

# =============================================================================
# DEBUGGING CONFIGURATION
# =============================================================================
[debugging]
# Debug output
enable_debug_output = false
debug_thread_operations = false
debug_cache_operations = false
debug_gpu_operations = false

# Profiling
enable_profiling = false
profile_sampling_rate = 0.1
profile_output_file = fgcom_profile.prof

# Tracing
enable_tracing = false
trace_file = fgcom_trace.log
trace_buffer_size_mb = 10
